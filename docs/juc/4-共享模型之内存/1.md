# 1. Java内存模型

## JMM介绍

- Java Memory Model，定义主存、工作内存抽象概念，底层对应着CPU寄存器、缓存、硬件缓存、CPU指令优化等。
  - 主存：所有的变量都存储在主内存中；
  - 工作内存：每个线程都有自己独立的工作内存，里面保存该线程使用到的变量的副本（主内存中该变量的一份拷贝），每个线程只能访问自己的工作内存，即线程中的本地变量对其他线程是不可见的；
  - 我的理解：主存可以类比内存，工作内存类比缓存。

![](/juc/15.png)

## JMM特点

- 原子性：保证指令不会受到线程上下文切换的影响，即一个操作或者多个操作要么全部执行并且执行的过程不会被任何因素打断，要么就都不执行；
- 可见性：保证指令不会受CPU缓存的影响，当一个线程修改了某个共享变量的值，其他线程是否能够马上得知这个修改的值；
- 有序性：保证指令不会受CPU指令并行优化的影响，程序编译称机器码指令后可能回出现指令重排现象，重排后的指令与原指令的顺序未必一致。

