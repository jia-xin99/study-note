# 04 本地方法栈

## 本地方法

- 一个Native方法即一个Java调用非Java代码的接口。
- 定义本地方法不需要实现体，实现体由非java语言（如C++）在外实现。
- native可与所有其他java标识符连用，abstract除外。
- 作用：与Java环境外交互，与OS交互等，Sun解释器用C实现。

## 本地方法栈

- 虚拟机栈管理java方法的调用，本地方法栈管理本地方法的调用。
- 线程私有。
- 异常情况同虚拟机栈。
- 本地方法用C实现。
- 做法：本地方法栈中登记native方法，执行引擎执行时加载本地方法库。
- 当线程调用一个本地方法时，其不受JVM限制。其和虚拟机有同样的权限。
	- 本地方法可通过本地方法接口访问虚拟机内部的运行时数据区。
	- 可直接使用本地处理器的寄存器
	- 直接从本地堆中分配任意数量的内存
- 并不是所有JVM支持本地方法。
- hotspot JVM中，本地方法栈和虚拟机方法栈合二为一。